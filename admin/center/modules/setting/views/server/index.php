<?phpuse yii\widgets\LinkPager;use yii\helpers\Url;use yii\helpers\Html;use yii\bootstrap\ActiveForm;use center\widgets\Alert;use center\modules\strategy\models\Control;$this->title = \Yii::t('app', 'Control Strategy');$attributes = $model->getAttributesList();$action = $this->context->action->id;$isEdit = $action == 'edit' ? true : false;$isAdd = !$isEdit;$id = Yii::$app->request->get('id');$labels = $model->getAttributesList();//х╗оч$canAdd = Yii::$app->user->can('server/control/add');$canEdit = Yii::$app->user->can('server/control/edit');$canDelete = Yii::$app->user->can('server/control/delete');$types = $model->getAttributesType();?><div class="page page-table">    <?= Alert::widget() ?>    <?php if( ($isAdd && $canAdd) || ($isEdit && $canEdit) ): ?>    <section class="panel panel-default table-dynamic">        <div class="panel-heading"><strong>                <?php if ($isEdit) {                    echo '<span class="glyphicon glyphicon-edit"></span> ';                    echo Yii::t('app', 'edit');                } else {                    echo '<span class="glyphicon glyphicon-plus"></span> ';                    echo Yii::t('app', 'add');                } ?>            </strong></div>        <div class="panel-body">            <?php if (!$isEdit): ?>				        <button type="button" class="btn btn-w-md btn-gap-v btn-primary" ng-click="isCollapsed = !isCollapsed">            <?= Yii::t('app', 'add') ?>            <i ng-show="!isCollapsed" class="fa fa-chevron-down"></i>            <i ng-show="isCollapsed" class="fa fa-chevron-up"></i>        </button>					            <?php endif ?>            <div class="row" <?php if (!$isEdit): ?>ng-cloak collapse="!isCollapsed" <?php endif ?> >                <?php if (!$isEdit): ?>                    <hr><?php endif ?>				                <div class="col-md-12">                    <?php $form = ActiveForm::begin([                        'layout' => 'horizontal',                        'id' => 'billing-form',                        'action' => $isEdit ? ['edit?id='.$id] : ['add'],                        'fieldConfig' => [                            'template' => "{label}\n{beginWrapper}\n{input}\n{error}\n{hint}\n{endWrapper}",                            'horizontalCssClasses' => [                                'label' => 'col-sm-2',                                'wrapper' => 'col-sm-10',                                'offset' => 'col-sm-offset-2',                                'error' => '',                                'hint' => '',                            ],                        ],                    ]); ?>					<?= $form->field($model, 'ip')->textInput(); ?>                    <?=$form->field($model, 'devicename')->dropDownList($types['devicename']);?>									<?= $form->field($model, 'type')->inline()->checkboxList($types['type']); ?>										<?=$form->field($model, 'admin')->dropDownList($types['admin'])?>					<?= $form->field($model, 'region')->textInput(); ?>										<?= $form->field($model, 'fault')->textarea(['rows'=>4])?>					<?= $form->field($model, 'configure')->textarea(['rows'=>4])?>										<div class="col-lg-8 col-sm-offset-2">						<?= Html::submitButton(Yii::t('app', 'save'), ['class' => 'btn btn-success']) ?>					</div>										<?php ActiveForm::end(); ?>				</div>								            </div>        </div>    </section>    <?php endif ?>    <?php if (!$isEdit): ?>        <div class="panel panel-default">		<section class="panel2 panel-default table-dynamic">            <div class="panel-heading"><strong><span class="glyphicon glyphicon-th-large"></span> <?=Yii::t('app', 'list')?></strong></div>            <?php if(!empty($list)) : ?>            <table class="table table-hover">                <thead>                <tr>                    <th>#</th>                    <th><?=$labels['ip']?></th>                    <th><?=$labels['devicename']?></th>                    <th><?=$labels['type']?></th>                    <th><?=$labels['admin']?></th>                    <th><?=$labels['region']?></th>                    <th><?=$labels['fault']?></th>                    <th><?=$labels['configure']?></th>                <?php if($canEdit || $canDelete): ?><th><?=Yii::t('app', 'operate')?></th><?php endif ?>                </tr>                </thead>                <tbody>                <?php foreach ($list as $id => $one) { ?>                    <tr>                        <td><?= $one['id']; ?></td>                        <td><?= Html::encode($one['ip']) ?></td>                        <td><?= Yii::t('app',$one['devicename']); ?></td>                        <td><?= $one['type'] ?></td>                        <td><?= $model->findAdminName($one['admin']); ?></td>                        <td><?= $one['region'] ?></td>                        <td><?= $one['fault'] ?></td>                        <td><?= $one['configure'] ?></td>                                            <?php if($canEdit || $canDelete): ?>                        <td>                            <?php if ($canEdit)                                echo Html::a(Html::button(Yii::t('app', 'edit'), ['class'=>'btn btn-warning btn-xs']), ['edit', 'id' => $one['id']], ['title'=>Yii::t('app', 'edit')])?>                            &nbsp;                            <?php if($canDelete)							                                    echo Html::a(Html::button(Yii::t('app', 'delete'), ['class'=>'btn btn-danger btn-xs']), ['delete', 'id' => $one['id']], [                                    'title' => Yii::t('app', 'delete'),                                    'data' => [                                        'method' => 'post',                                        'confirm' => Yii::t('app', 'control help4'),                                    ],                                    ]);                                 ?>                        </td>                        <?php endif ?>                    </tr>                <?php } ?>                </tbody>            </table>            <footer class="table-footer">                <div class="row">                    <div class="col-md-6">                        <?=Yii::t('app', 'pagination show1', [                            'totalCount' => $pagination->totalCount,                            'totalPage' => $pagination->getPageCount(),                            'perPage' => $pagination->pageSize,                        ])?>                    </div>                    <div class="col-md-6 text-right">                        <?php                        echo LinkPager::widget(['pagination' => $pagination, 'maxButtonCount' => 5]);                        ?>                    </div>                </div>            </footer>            <?php else: ?>                <div class="panel-body">                    <?=Yii::t('app', 'no record')?>                </div>            <?php endif ?>			</section>        </div>    <?php endif ?></div>